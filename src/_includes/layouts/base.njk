<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% if title %}{{ title }} · {% endif %}{{ site.title }}</title>
    <meta name="description" content="{{ description or site.description }}" />
    <link rel="icon" href="/favicon.ico" />
    <script>
      (() => {
        try {
          const stored = localStorage.getItem("theme");
          if (stored) {
            document.documentElement.dataset.theme = stored;
            return;
          }
          if (window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches) {
            document.documentElement.dataset.theme = "dark";
          }
        } catch (err) {
          // Ignore storage or media errors.
        }
      })();
    </script>
    <style>
      {% include "inline.css" %}
    </style>
    <link rel="icon" href="/favicon.ico" />
  </head>
  <body>
    {% include "partials/nav.njk" %}
    <main class="main">
      {{ content | safe }}
    </main>
    <footer class="footer">
      {% if page.url == "/" %}
        <div class="social-strip" aria-label="Social links">
          <a class="social-link" href="https://github.com/doruktakim" aria-label="GitHub" target="_blank" rel="noopener noreferrer">
            <svg viewBox="0 0 24 24" role="img" aria-hidden="true" focusable="false">
              <path
                d="M12 2C6.48 2 2 6.58 2 12.24c0 4.52 2.87 8.35 6.84 9.7.5.1.68-.22.68-.48 0-.24-.01-.88-.01-1.72-2.78.62-3.37-1.38-3.37-1.38-.46-1.18-1.11-1.49-1.11-1.49-.91-.64.07-.63.07-.63 1 .07 1.52 1.05 1.52 1.05.9 1.56 2.36 1.11 2.93.85.09-.67.35-1.11.63-1.36-2.22-.26-4.56-1.14-4.56-5.09 0-1.12.39-2.04 1.03-2.76-.1-.26-.45-1.32.1-2.74 0 0 .85-.28 2.79 1.05.81-.23 1.68-.34 2.54-.34.86 0 1.73.12 2.54.34 1.94-1.33 2.79-1.05 2.79-1.05.55 1.42.2 2.48.1 2.74.64.72 1.02 1.64 1.02 2.76 0 3.96-2.35 4.82-4.58 5.08.36.32.69.93.69 1.88 0 1.36-.01 2.46-.01 2.79 0 .26.18.59.69.48A10.02 10.02 0 0 0 22 12.24C22 6.58 17.52 2 12 2Z"
              />
            </svg>
          </a>
          <a class="social-link" href="https://linkedin.com/in/dtakim/" aria-label="LinkedIn" target="_blank" rel="noopener noreferrer">
            <svg viewBox="0 0 24 24" role="img" aria-hidden="true" focusable="false">
              <path
                d="M4.98 3.5c0 1.38-1.11 2.5-2.48 2.5S0 4.88 0 3.5 1.11 1 2.5 1s2.48 1.12 2.48 2.5ZM.2 8.04h4.6V23H.2V8.04Zm7.8 0h4.41v2.05h.06c.61-1.16 2.11-2.39 4.34-2.39 4.64 0 5.5 3.1 5.5 7.13V23h-4.6v-6.6c0-1.57-.03-3.58-2.18-3.58-2.18 0-2.51 1.7-2.51 3.47V23h-4.6V8.04Z"
              />
            </svg>
          </a>
        </div>
      {% endif %}
      <p>© {{ "now" | date("%Y") }} {{ site.title }}. Built for speed.</p>
    </footer>
    <script>
      (() => {
        const toggle = document.querySelector("[data-theme-toggle]");
        if (!toggle) return;

        const root = document.documentElement;
        const stored = (() => {
          try {
            return localStorage.getItem("theme");
          } catch (err) {
            return null;
          }
        })();

        const prefersDark =
          window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
        const initialTheme = root.dataset.theme || stored || (prefersDark ? "dark" : "light");

        const applyTheme = (theme, persist) => {
          root.dataset.theme = theme;
          if (persist) {
            try {
              localStorage.setItem("theme", theme);
            } catch (err) {
              // Ignore storage errors.
            }
          }
          toggle.setAttribute("aria-pressed", theme === "dark");
          toggle.setAttribute(
            "aria-label",
            theme === "dark" ? "Switch to light mode" : "Switch to dark mode"
          );
        };

        applyTheme(initialTheme, false);

        toggle.addEventListener("click", () => {
          const nextTheme = root.dataset.theme === "dark" ? "light" : "dark";
          applyTheme(nextTheme, true);
        });
      })();
    </script>
  </body>
</html>
